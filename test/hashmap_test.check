#include <stdio.h>
#include <stdlib.h>
#include "../hashmap.h"

#test put_get_equality
	struct hashmap *table = hashmap_alloc(4);
	for (int i = 0; i < 512; i++) {
		char key[10];
		sprintf(key, "key%i", i);
		table = hashmap_put(table, key, i);
	}

	int errors = 0;
	for (int i = 0; i < 512; i++) {
		char key[10];
		sprintf(key, "key%i", i);
		if (hashmap_get(table, key) != i) {
			errors++;
		}
	}
	hashmap_free(table);

    ck_assert(errors == 0);

#test put_reassign 
	struct hashmap *table = hashmap_alloc(4);
	for (int i = 0; i < 10; i++) {
		char key[10];
		sprintf(key, "key%i", i%2);
		table = hashmap_put(table, key, i);
	}

    int capacity = table->capacity;
    int size = table->size;
	hashmap_free(table);

    ck_assert(capacity == 4);
    ck_assert(size == 2);
